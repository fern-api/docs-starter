---
layout: overview
slug: nemo-rl/nemo_rl/utils/timer
title: nemo_rl.utils.timer
---

## Module Contents

### Classes

| Name | Description |
|------|-------------|
| [`TimeoutChecker`](#nemo_rl-utils-timer-TimeoutChecker) | - |
| [`Timer`](#nemo_rl-utils-timer-Timer) | A utility for timing code execution. |

### Functions

| Name | Description |
|------|-------------|
| [`convert_to_seconds`](#nemo_rl-utils-timer-convert_to_seconds) | Converts a time string in the format 'DD:HH:MM:SS' to total seconds. |

### API

<Anchor id="nemo_rl-utils-timer-TimeoutChecker">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
class nemo_rl.utils.timer.TimeoutChecker(
    timeout: typing.Optional[str] = '00:03:45:00',
    fit_last_save_time: bool = False
)
```

</CodeBlock>
</Anchor>

<Indent>

<ParamField path="iteration_times" type="= []">
</ParamField>

<ParamField path="last_save_time">
</ParamField>

<ParamField path="previous_iteration_time" type="Optional[float] = None">
</ParamField>

<ParamField path="start_time" type="= time.time()">
</ParamField>
<Anchor id="nemo_rl-utils-timer-TimeoutChecker-check_save">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.TimeoutChecker.check_save()
```

</CodeBlock>
</Anchor>

<Indent>


</Indent>
<Anchor id="nemo_rl-utils-timer-TimeoutChecker-mark_iteration">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.TimeoutChecker.mark_iteration()
```

</CodeBlock>
</Anchor>

<Indent>


</Indent>
<Anchor id="nemo_rl-utils-timer-TimeoutChecker-start_iterations">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.TimeoutChecker.start_iterations()
```

</CodeBlock>
</Anchor>

<Indent>


</Indent>
</Indent>

<Anchor id="nemo_rl-utils-timer-Timer">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
class nemo_rl.utils.timer.Timer()
```

</CodeBlock>
</Anchor>

<Indent>

A utility for timing code execution.

Supports two usage patterns:
1. Explicit start/stop: timer.start("label"), timer.stop("label")
2. Context manager: with timer.time("label"): ...

The timer keeps track of multiple timing measurements for each label,
and supports different reductions on these measurements (mean, median,
min, max, std dev).

Example usage:
<CodeBlock showLineNumbers={false}>

```python
timer = Timer()

# Method 1: start/stop
timer.start("load_data")
data = load_data()
timer.stop("load_data")

# Method 2: context manager
with timer.time("model_forward"):
    model_outputs = model(inputs)

# Multiple timing measurements for the same operation
for batch in dataloader:
    with timer.time("model_forward_multiple"):
        outputs = model(batch)

# Get all times for one label
model_forward_times = timer.get_elapsed("model_forward_multiple")

# Get reductions for one label
mean_forward_time = timer.reduce("model_forward_multiple")
max_forward_time = timer.reduce("model_forward_multiple", "max")
```

</CodeBlock>


<ParamField path="_REDUCTION_FUNCTIONS" type="dict[str, Callable[[Sequence[float]], float]]">
</ParamField>

<ParamField path="_start_times" type="dict[str, float] = &#123;&#125;">
</ParamField>

<ParamField path="_timers" type="dict[str, list[float]] = &#123;&#125;">
</ParamField>
<Anchor id="nemo_rl-utils-timer-Timer-get_elapsed">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.get_elapsed(
    label: str
) -> list[float]
```

</CodeBlock>
</Anchor>

<Indent>

Get all elapsed time measurements for a specific label.

**Parameters:**

<ParamField path="label" type="str">
The timing label to get elapsed times for
</ParamField>

**Returns:** `list[float]`

A list of all elapsed time measurements in seconds

**Raises:**

- `KeyError`: If the label doesn't exist


</Indent>
<Anchor id="nemo_rl-utils-timer-Timer-get_latest_elapsed">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.get_latest_elapsed(
    label: str
) -> float
```

</CodeBlock>
</Anchor>

<Indent>

Get the most recent elapsed time measurement for a specific label.

**Parameters:**

<ParamField path="label" type="str">
The timing label to get the latest elapsed time for
</ParamField>

**Returns:** `float`

The most recent elapsed time measurement in seconds

**Raises:**

- `KeyError`: If the label doesn't exist
- `IndexError`: If the label exists but has no measurements


</Indent>
<Anchor id="nemo_rl-utils-timer-Timer-get_timing_metrics">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.get_timing_metrics(
    reduction_op: typing.Union[str, dict[str, str]] = 'mean'
) -> dict[str, float | list[float]]
```

</CodeBlock>
</Anchor>

<Indent>

Get all timing measurements with optional reduction.

**Parameters:**

<ParamField path="reduction_op" type="Union[str, dict[str, str]]" default="'mean'">
Either a string specifying a reduction operation to apply to all labels,
         or a dictionary mapping specific labels to reduction operations.
         Valid reduction operations are: "mean", "median", "min", "max", "std", "sum", "count".
         If a label is not in the dictionary, no reduction is applied and all measurements are returned.
</ParamField>

**Returns:** `dict[str, float | list[float]]`

A dictionary mapping labels to either:

**Raises:**

- `ValueError`: If an invalid reduction operation is provided


</Indent>
<Anchor id="nemo_rl-utils-timer-Timer-reduce">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.reduce(
    label: str,
    operation: str = 'mean'
) -> float
```

</CodeBlock>
</Anchor>

<Indent>

Apply a reduction function to timing measurements for the specified label.

**Parameters:**

<ParamField path="label" type="str">
The timing label to get reduction for
</ParamField>

<ParamField path="operation" type="str" default="'mean'">
The type of reduction to apply. Valid options are:
- "mean": Average time (default)
- "median": Median time
- "min": Minimum time
- "max": Maximum time
- "std": Standard deviation
- "sum": Total time
- "count": Number of measurements
</ParamField>

**Returns:** `float`

A single float with the reduction result

**Raises:**

- `KeyError`: If the label doesn't exist
- `ValueError`: If an invalid operation is provided


</Indent>
<Anchor id="nemo_rl-utils-timer-Timer-reset">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.reset(
    label: typing.Optional[str] = None
) -> None
```

</CodeBlock>
</Anchor>

<Indent>

Reset timings for the specified label or all labels.

**Parameters:**

<ParamField path="label" type="Optional[str]" default="None">
Optional label to reset. If None, resets all timers.
</ParamField>


</Indent>
<Anchor id="nemo_rl-utils-timer-Timer-start">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.start(
    label: str
) -> None
```

</CodeBlock>
</Anchor>

<Indent>

Start timing for the given label.


</Indent>
<Anchor id="nemo_rl-utils-timer-Timer-stop">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.stop(
    label: str
) -> float
```

</CodeBlock>
</Anchor>

<Indent>

Stop timing for the given label and return the elapsed time.

**Parameters:**

<ParamField path="label" type="str">
The label to stop timing for
</ParamField>

**Returns:** `float`

The elapsed time in seconds

**Raises:**

- `ValueError`: If the timer for the given label is not running


</Indent>
<Anchor id="nemo_rl-utils-timer-Timer-time">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.Timer.time(
    label: str
) -> typing.Generator[None, None, None]
```

</CodeBlock>
</Anchor>

<Indent>

Context manager for timing a block of code.

**Parameters:**

<ParamField path="label" type="str">
The label to use for this timing
</ParamField>


</Indent>
</Indent>

<Anchor id="nemo_rl-utils-timer-convert_to_seconds">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.utils.timer.convert_to_seconds(
    time_string: str
) -> int
```

</CodeBlock>
</Anchor>

<Indent>

Converts a time string in the format 'DD:HH:MM:SS' to total seconds.

**Parameters:**

<ParamField path="time_string" type="str">
Time duration string, e.g., '00:03:45:00'.
</ParamField>

**Returns:** `int`

Total time in seconds.


</Indent>
