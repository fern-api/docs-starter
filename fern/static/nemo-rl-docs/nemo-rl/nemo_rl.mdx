---
layout: overview
slug: nemo-rl/nemo_rl
title: nemo_rl
---

## Subpackages

- **[`nemo_rl.algorithms`](/nemo-rl/nemo_rl/algorithms)**
- **[`nemo_rl.data`](/nemo-rl/nemo_rl/data)**
- **[`nemo_rl.distributed`](/nemo-rl/nemo_rl/distributed)**
- **[`nemo_rl.environments`](/nemo-rl/nemo_rl/environments)**
- **[`nemo_rl.evals`](/nemo-rl/nemo_rl/evals)**
- **[`nemo_rl.experience`](/nemo-rl/nemo_rl/experience)**
- **[`nemo_rl.models`](/nemo-rl/nemo_rl/models)**
- **[`nemo_rl.utils`](/nemo-rl/nemo_rl/utils)**

## Submodules

- **[`nemo_rl.package_info`](/nemo-rl/nemo_rl/package_info)**

## Package Contents

### Functions

| Name | Description |
|------|-------------|
| [`_check_container_fingerprint`](#nemo_rl-_check_container_fingerprint) | Check if container dependencies match the current code (container-only). |
| [`_is_build_isolation`](#nemo_rl-_is_build_isolation) | Detect if we're running in a uv build isolation environment. |
| [`_patch_nsight_file`](#nemo_rl-_patch_nsight_file) | Patch the nsight.py file to fix the context.py_executable assignment. |
| [`patch_transformers_module_dir`](#nemo_rl-patch_transformers_module_dir) | - |

### Data

[`megatron_path`](#nemo_rl-megatron_path)

### API

<Anchor id="nemo_rl-_check_container_fingerprint">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl._check_container_fingerprint()
```

</CodeBlock>
</Anchor>

<Indent>

Check if container dependencies match the current code (container-only).

This check only runs when NRL_CONTAINER=1 is set (inside containers).
It compares the container's fingerprint (computed at build time) with
the current code's fingerprint to detect dependency drift.

This check is also skipped entirely if NRL_FORCE_REBUILD_VENVS=true is set,
since environment rebuilding will ensure dependencies are consistent regardless
of a mismatch.

If there's a mismatch, raises RuntimeError unless NRL_IGNORE_VERSION_MISMATCH is set.


</Indent>

<Anchor id="nemo_rl-_is_build_isolation">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl._is_build_isolation()
```

</CodeBlock>
</Anchor>

<Indent>

Detect if we're running in a uv build isolation environment.

When running uv lock/sync, uv creates a temporary isolated environment
in ~/.cache/uv/builds-v*/ to build packages and introspect metadata.
We skip the fingerprint check in this context since the user is updating dependencies.

Returns True if in build isolation, False otherwise.


</Indent>

<Anchor id="nemo_rl-_patch_nsight_file">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl._patch_nsight_file()
```

</CodeBlock>
</Anchor>

<Indent>

Patch the nsight.py file to fix the context.py_executable assignment.

Until this fix is upstreamed, we will maintain this patch here. This patching
logic is only applied if the user intends to use nsys profiling which they enable with
NRL_NSYS_WORKER_PATTERNS.

If enabled, will effectively apply the following patch in an idempotent manner:

https://github.com/ray-project/ray/compare/master...terrykong:ray:tk/nsight-py-exeutable-fix?expand=1

This hack works b/c the nsight plugin is not called from the main driver process, so
as soon as nemo_rl is imported, the patch is applied and the source of the nsight.py module
is up to date before the nsight.py is actually needed.


</Indent>

<Anchor id="nemo_rl-patch_transformers_module_dir">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.patch_transformers_module_dir(
    env_vars: dict[str, str]
)
```

</CodeBlock>
</Anchor>

<Indent>


</Indent>

<Anchor id="nemo_rl-megatron_path">

<CodeBlock showLineNumbers={false} wordWrap={true}>

```python
nemo_rl.megatron_path = Path(__file__).parent.parent / '3rdparty' / 'Megatron-LM-workspace' / 'Megatron-...
```

</CodeBlock>
</Anchor>

